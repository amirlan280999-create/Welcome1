# –ó–ê–î–ê–ù–ò–ï 4: "–í–∞–ª–∏–¥–∞—Ç–æ—Ä —Ü–µ–Ω–Ω–∏–∫–æ–≤" (Try/Except + Raise)

# 1. –ò—Å—Ö–æ–¥–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ü–µ–Ω–Ω–∏–∫–æ–≤ (—Å–æ–¥–µ—Ä–∂–∏—Ç –æ—à–∏–±–∫–∏)
price_tags = ["100", "250", "–±–µ—Å—Ü–µ–Ω–Ω–æ", "400", "-50", "999", "0", "–ø—è—Ç—å–¥–µ—Å—è—Ç", "150.5"]

print("=" * 50)
print(" –í–ê–õ–ò–î–ê–¢–û–† –¶–ï–ù–ù–ò–ö–û–í")
print("=" * 50)
print(f"–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: {price_tags}")
print("-" * 50)

# 2. –°–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫ –¥–ª—è –≤–∞–ª–∏–¥–Ω—ã—Ö —Ü–µ–Ω
valid_prices = []

print("üîç –ù–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É —Ü–µ–Ω–Ω–∏–∫–æ–≤...\n")

# 3. –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º —Ü–µ–Ω–Ω–∏–∫–∞–º
for tag in price_tags:
    print(f"–û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º: '{tag}'")

    try:
        # 4. –ü—ã—Ç–∞–µ–º—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É –≤ —á–∏—Å–ª–æ
        price = int(tag)  # int() –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å ValueError

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—É—é —Ü–µ–Ω—É
        if price < 0:
            # –í—ã–∑—ã–≤–∞–µ–º –æ—à–∏–±–∫—É –≤—Ä—É—á–Ω—É—é
            raise ValueError(f"–¶–µ–Ω–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π: {price}")

        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω—É–ª–µ–≤—É—é —Ü–µ–Ω—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        if price == 0:
            print(f"    –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: —Ü–µ–Ω–∞ —Ä–∞–≤–Ω–∞ 0, –Ω–æ –≤—Å–µ —Ä–∞–≤–Ω–æ –¥–æ–±–∞–≤–ª—è–µ–º")

        # –¶–µ–Ω–∞ –ø—Ä–æ—à–ª–∞ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ - –¥–æ–±–∞–≤–ª—è–µ–º –≤ —Å–ø–∏—Å–æ–∫
        valid_prices.append(price)
        print(f"   –£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ: {price}")

    except ValueError as e:
        # 5. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏, –Ω–æ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É
        error_message = str(e)

        # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –æ—à–∏–±–∫–∏ –¥–ª—è –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        if "invalid literal" in error_message or "int()" in error_message:
            print(f"   –û—à–∏–±–∫–∞ –¥–∞–Ω–Ω—ã—Ö: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —á–∏—Å–ª–∞ ('{tag}')")
        elif "–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π" in error_message:
            print(f"   –û—à–∏–±–∫–∞ –¥–∞–Ω–Ω—ã—Ö: {error_message}")
        else:
            print(f"   –û—à–∏–±–∫–∞ –¥–∞–Ω–Ω—ã—Ö: {error_message}")

    print()  # –ü—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏

# 6. –í—ã–≤–æ–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
print("=" * 50)
print(" –†–ï–ó–£–õ–¨–¢–ê–¢–´ –í–ê–õ–ò–î–ê–¶–ò–ò:")
print("-" * 50)
print(f"–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ü–µ–Ω–Ω–∏–∫–æ–≤: {len(price_tags)}")
print(f"–£—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ: {len(valid_prices)}")
print(f"–ù–∞–π–¥–µ–Ω–æ –æ—à–∏–±–æ–∫: {len(price_tags) - len(valid_prices)}")

if valid_prices:
    print(f"\n –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Ü–µ–Ω—ã: {valid_prices}")
    print(f" –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: {min(valid_prices)}")
    print(f" –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞: {max(valid_prices)}")
    print(f" –°—É–º–º–∞ –≤—Å–µ—Ö —Ü–µ–Ω: {sum(valid_prices)}")

    # –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞
    avg_price = sum(valid_prices) / len(valid_prices)
    print(f" –°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞: {avg_price:.2f}")
else:
    print("\n –ù–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Ü–µ–Ω –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è")

print("=" * 50)
print(" –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!")


